"0","# --- Identify the top brands from your YTD summary ---"
"0","top_brands <- summary_data %>%"
"0","  slice_head(n = 10) %>%"
"0","  pull(maker)"
"0",""
"0","# --- Prepare data for the time series plot ---"
"0","# Filter main data for top brands & count registrations by month"
"0","monthly_trends_data <- car_data |>"
"0","  filter(maker %in% top_brands) |>"
"0","  mutate(month = date_reg) |>"
"0","  count(month, maker, name = ""registration"")"
"0",""
"0","# --- Create the plot ---"
"0","trend_plot <- ggplot(monthly_trends_data, aes(x = month, y = registration, color = maker)) +"
"0","  geom_line(linewidth = 0.5) +"
"0","  geom_point(size = 1.5) +"
"0","  labs("
"0","    title = NULL,"
"0","    x = ""Month"","
"0","    y = ""Registration"","
"0","    color = NULL"
"0","  ) +"
"0","  theme_minimal(base_size = 14) +"
"0","  scale_y_continuous(labels = scales::comma)  # Put legend at the top"
"0",""
"0","# --- Convert the ggplot object to an interactive plotly chart ---"
"0","ggplotly(trend_plot) |>"
"0","    layout(legend = list("
"0","      # orientation = ""h"","
"0","      # xanchor = ""center"","
"0","      # x = 0.5,"
"0","      y = 0.5,"
"0","      font = list(size = 12)"
"0","    ))"
